<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Conexi√≥n ESP32</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #2c3e50;
      color: #ecf0f1;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      flex-direction: column;
      text-align: center;
      transition: background-color 0.5s ease;
    }

    h1 {
      font-size: 3em;
      margin: 0.5em 0;
    }

    .status {
      font-size: 1.5em;
      margin: 1em 0;
      transition: color 0.3s ease;
    }

    .status.connected {
      color: #2ecc71; /* Verde */
    }

    .status.disconnected {
      color: #e74c3c; /* Rojo */
    }

    .icon {
      font-size: 5em;
      margin-bottom: 1em;
      animation: bounce 1s infinite alternate;
    }

    .connected .icon {
      color: #2ecc71;
    }

    .disconnected .icon {
      color: #e74c3c;
    }

    @keyframes bounce {
      0% {
        transform: translateY(0);
      }
      100% {
        transform: translateY(-20px);
      }
    }

    .loading {
      color: #f39c12; /* Naranja */
    }

    .footer {
      position: absolute;
      bottom: 10px;
      font-size: 0.8em;
      color: #7f8c8d;
    }

  </style>
</head>
<body>
  <div id="app">
    <div id="connection-status" class="disconnected">
      <div class="icon">üîå</div>
      <h1>Esperando Conexi√≥n...</h1>
      <p class="status">El ESP32 a√∫n no se ha conectado.</p>
    </div>
    <div class="footer">Proyecto ESP32 - Render App</div>
  </div>

  <script>
    // Comprobaci√≥n de la conexi√≥n con el ESP32
    function checkConnection() {
      fetch('/estado')  // El endpoint que el ESP32 responder√°
        .then(response => response.json())
        .then(data => {
          const statusElement = document.querySelector('.status');
          const connectionElement = document.getElementById('connection-status');
          if (data.status === 'Conectado') {
            statusElement.textContent = "¬°El ESP32 est√° conectado!";
            connectionElement.classList.remove('disconnected');
            connectionElement.classList.add('connected');
            document.querySelector('.icon').textContent = "‚úÖ";
          } else {
            statusElement.textContent = "Esperando conexi√≥n...";
            connectionElement.classList.remove('connected');
            connectionElement.classList.add('disconnected');
            document.querySelector('.icon').textContent = "üîå";
          }
        })
        .catch(error => {
          console.log("Error al verificar la conexi√≥n:", error);
        });
    }

    // Actualizar la conexi√≥n cada 3 segundos
    setInterval(checkConnection, 3000);
    checkConnection();  // Comienza la comprobaci√≥n al cargar la p√°gina
  </script>
</body>
</html>
